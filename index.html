<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bipolar Chat - Original</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <style>
        /* ESTILO DA TELA DE LOGIN */
        body {
            background-color: #0d0208;
            color: #fff;
            font-family: 'Courier New', monospace;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        #login-screen {
            background: rgba(20, 0, 10, 0.95);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid #ff0055;
            box-shadow: 0 0 20px #ff0055;
            text-align: center;
            z-index: 100;
        }

        /* INTERFACE DO CHAT (SÃ“ APARECE APÃ“S LOGIN) */
        #main-interface {
            display: none; /* Escondido no inÃ­cio */
            width: 100vw;
            height: 100vh;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* SEUS CORAÃ‡Ã•ES FLUTUANTES */
        .floating {
            position: absolute;
            font-size: 20px;
            animation: float 5s infinite ease-in-out;
            opacity: 0.6;
            z-index: 1;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .chat-box {
            width: 400px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff0055;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px #ff0055;
            z-index: 10;
        }

        .channels {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .channel-btn {
            background: #220011;
            color: #ff0055;
            border: 1px solid #ff0055;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }

        .channel-btn.active {
            background: #ff0055;
            color: #fff;
            box-shadow: 0 0 10px #ff0055;
        }

        #messages {
            height: 300px;
            overflow-y: auto;
            border-bottom: 1px solid #333;
            margin-bottom: 10px;
            padding: 10px;
        }

        input {
            width: 80%;
            padding: 10px;
            background: #111;
            border: 1px solid #ff0055;
            color: #fff;
            border-radius: 5px;
        }

        button.send-btn {
            padding: 10px;
            background: #ff0055;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color: #ff0055; text-shadow: 0 0 10px #ff0055;">BIPOLAR LOGIN</h1>
        <input type="text" id="user-input" placeholder="UsuÃ¡rio" style="width: 100%; margin-bottom: 10px;"><br>
        <input type="password" id="pass-input" placeholder="Senha (6 dÃ­gitos)" style="width: 100%; margin-bottom: 10px;"><br>
        <button onclick="logar()" style="width: 100%; padding: 10px; background: #ff0055; color: white; border: none; cursor: pointer; border-radius: 5px;">ENTRAR</button>
        <p id="error" style="color: red; font-size: 12px; margin-top: 10px;"></p>
    </div>

    <div id="main-interface">
        <h1 id="chat-title">ðŸ’– CANAL 1: AMOR ðŸ’–</h1>
        
        <div class="channels">
            <button class="channel-btn active" onclick="switchChannel('canal1')">CANAL 1 ðŸ’–</button>
            <button class="channel-btn" onclick="switchChannel('canal2')">CANAL 2 ðŸ’€</button>
        </div>

        <div class="chat-box">
            <div id="messages"></div>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="msg-input" placeholder="Sua mensagem...">
                <button class="send-btn" onclick="enviar()">ENVIAR</button>
            </div>
        </div>
        
        <button onclick="auth.signOut()" style="margin-top: 20px; background: none; border: 1px solid #333; color: #555; cursor: pointer;">SAIR</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD7GIQgMVr0lf4BOyQkXBh_Qhk-GK6wMK4",
            authDomain: "chat2000-5815b.firebaseapp.com",
            databaseURL: "https://chat2000-5815b-default-rtdb.firebaseio.com",
            projectId: "chat2000-5815b",
            storageBucket: "chat2000-5815b.firebasestorage.app",
            messagingSenderId: "88820669466",
            appId: "1:88820669466:web:df968acfebc5bd31ec85a3"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let currentChannel = 'canal1';

        // GERADOR DE EFEITOS (CoraÃ§Ãµes/Caveiras)
        function createEffect(emoji) {
            const el = document.createElement('div');
            el.className = 'floating';
            el.innerHTML = emoji;
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 5000);
        }

        setInterval(() => {
            if(!document.getElementById('main-interface').classList.contains('hidden')){
                createEffect(currentChannel === 'canal1' ? 'ðŸ’–' : 'ðŸ’€');
            }
        }, 500);

        // LOGIN
        function logar() {
            const u = document.getElementById('user-input').value;
            const p = document.getElementById('pass-input').value;
            if(!u || p.length < 6) return document.getElementById('error').innerText = "Senha curta!";
            
            const email = u.trim().toLowerCase() + "@chat.com";
            auth.signInWithEmailAndPassword(email, p).catch(() => auth.createUserWithEmailAndPassword(email, p));
        }

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-interface').style.display = 'flex';
                loadMessages();
            } else {
                document.getElementById('login-screen').style.display = 'block';
                document.getElementById('main-interface').style.display = 'none';
            }
        });

        // CHAT LOGIC
        function switchChannel(ch) {
            currentChannel = ch;
            document.querySelectorAll('.channel-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('chat-title').innerHTML = ch === 'canal1' ? 'ðŸ’– CANAL 1: AMOR ðŸ’–' : 'ðŸ’€ CANAL 2: CAOS ðŸ’€';
            document.getElementById('chat-title').style.color = ch === 'canal1' ? '#ff0055' : '#ffffff';
            loadMessages();
        }

        function enviar() {
            const txt = document.getElementById('msg-input').value;
            if(txt.trim()){
                db.ref("messages/" + currentChannel).push({
                    user: auth.currentUser.email.split('@')[0],
                    text: txt
                });
                document.getElementById('msg-input').value = "";
            }
        }

        function loadMessages() {
            const box = document.getElementById("messages");
            box.innerHTML = "";
            db.ref("messages/" + currentChannel).off();
            db.ref("messages/" + currentChannel).limitToLast(20).on("child_added", snap => {
                const d = snap.val();
                box.innerHTML += `<div><b style="color:#ff0055">${d.user}:</b> ${d.text}</div>`;
                box.scrollTop = box.scrollHeight;
            });
        }

        // ENTER KEY
        document.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                if(document.getElementById('main-interface').style.display === 'flex') enviar();
                else logar();
            }
        });
    </script>
</body>
</html>
